{% extends "wagtailadmin/generic/index.html" %}
{% load i18n wagtailadmin_tags wagtailcore_tags %}

{% block content %}
    {% trans "Forms" as page_title %}
    {# Use a simple header without complex styling #}
    <div style="padding: 1.5em 1em 0.5em 1em; border-bottom: 1px solid #ddd;">
        <h1 style="font-size: 1.5em; font-weight: bold; margin: 0;">{% trans "Forms" %}</h1>
    </div>
    <div style="padding: 1em;">
        {% if form_pages %}
            <table class="listing full-width" style="table-layout: fixed; width: 100%;">
                <thead>
                    <tr>
                        {# Headers with explicit width (as percentages) #}
                        <th style="width: 25%;">{% trans "Title" %}</th>
                        <th style="width: 15%;">{% trans "Parent" %}</th>
                        <th style="width: 15%;">{% trans "Origin" %}</th>
                        <th style="width: 10%;">{% trans "Status" %}</th>
                        <th style="width: 35%;">{% trans "Action" %}</th>
                    </tr>
                </thead>
                <tbody>
                    {% for fp in form_pages %}
                        <tr>
                            <td style="width: 25%;">
                                <a href="{% url 'wagtailforms:list_submissions' fp.id %}">
                                    {{ fp.title }}
                                </a>
                            </td>
                            <td style="width: 15%;">
                                {% if fp.get_parent %}
                                    <a href="{% url 'wagtailadmin_pages:edit' fp.get_parent.id %}">
                                        {{ fp.get_parent.title }}
                                    </a>
                                {% else %}
                                    â€”
                                {% endif %}
                            </td>
                          <td class="type"> <small><a href="{% url 'wagtailadmin_pages:edit' fp.id %}" class="nolink">{{ fp.content_type.name |capfirst }} ({{ fp.content_type.app_label }}.{{ fp.content_type.model }})</a></small> </td>
                            <td style="width: 10%;">
                                {% if fp.live %}
                                    <span class="status-tag status-tag--live">{% trans "LIVE" %}</span>
                                {% else %}
                                    <span class="status-tag">{% trans "Draft" %}</span>
                                {% endif %}
                            </td>
                            <td style="width: 35%;">
                                <a href="{% url 'generate_dashboard' fp.id %}" class="button">
                                    {% trans "Generate Dashboard" %}
                                </a>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% else %}
            <div style="padding: 1em;">
                <p>{% trans "No forms found." %}</p>
            </div>
        {% endif %}
    </div>
{% endblock %}